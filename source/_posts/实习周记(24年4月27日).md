---
title: 实习周记(24年4月19日)
date: 2024-4-27 10:47:33  
tags:
- 前端学习计划
- 前端
categories: 
- 笔记
---

#### 4.23

##### moment记录

![image-20240423112005313](https://36038098-1323630637.cos.ap-nanjing.myqcloud.com/images/image-20240423112005313.png)

#### 遇到el-table筛选后popover失效问题 

loadData = []

置空一下解决，感觉el-table有缓存

#### 4.24

```js
:prop=" 'tableData.' + scope.$index + '.agreementButtonModel' "
```

#### el-table设置第一行背景颜色

```js
<el-table
  :data="detailList"
  border
  style="width: 100%; margin-bottom: 30px"
  :header-cell-style="getRowClass"
>
getRowClass({ row, column, rowIndex, columnIndex }) {
  return rowIndex === 0 ? 'background: #fafafa' : ''
}
```

### 4.25

学习分析存哥的一次rollup打包

```js
const resolveFile = (path) => {
  return NodePath.resolve(__dirname, '.', path).split(NodePath.sep).join('/')
}
```

`_dirname` 是当前文件的绝对路径，`resolve` 函数统一path(相对路径和绝对路径) -> 绝对路径，`NodePath.sep` 是当前操作系统的命令分隔符 `unix`  是 `/` ,  `windows` 是`\`

`resolveFile` 通用函数是为了统一各操作系统,并转为绝对路径

```json
plugins: [
  RollupNodeResolve({
    modulesOnly: true
  }),
  RollupCommonjs({
    include: /\/node_modules\//
  }),
  RollupJson(),
  RollupTypescript({
    tsconfig: './tsconfig.json'
  }),
  RollupVue(),
  RollupBabel({
    extensions: ['.js', '.vue', '.tsx']
  }),
  RollupPostcss({
    extract: true,
  }),
]
```

`plugins` 这块主要用了这些插件，一步一步打包

完整代码

```json
import NodePath from 'path'
import RollupJson from '@rollup/plugin-json'
import RollupNodeResolve from '@rollup/plugin-node-resolve'
import RollupCommonjs from '@rollup/plugin-commonjs'
import RollupTypescript from 'rollup-plugin-typescript2'
import RollupBabel from 'rollup-plugin-babel'
import RollupVue from 'rollup-plugin-vue'
import RollupPostcss from 'rollup-plugin-postcss'
import Package from './package.json'

const resolveFile = (path) => {
  return NodePath.resolve(__dirname, '.', path).split(NodePath.sep).join('/')
}

const externalPackages = [
  '@hb/plateform-taro-native',
  'vue',
  '@tarojs/components',
  '@tarojs/runtime',
  '@tarojs/taro',
]

export default {
  input: resolveFile(Package.source),
  output: [
    {
      file: resolveFile(Package.main),
      format: 'cjs',
      sourcemap: true
    },
    {
      file: resolveFile(Package.module),
      format: 'es',
      sourcemap: true
    }
  ],
  external: externalPackages,
  plugins: [
    RollupNodeResolve({
      modulesOnly: true
    }),
    RollupCommonjs({
      include: /\/node_modules\//
    }),
    RollupJson(),
    RollupTypescript({
      tsconfig: './tsconfig.json'
    }),
    RollupVue(),
    RollupBabel({
      extensions: ['.js', '.vue', '.tsx']
    }),
    RollupPostcss({
      extract: true,
    }),
  ]
}

```

